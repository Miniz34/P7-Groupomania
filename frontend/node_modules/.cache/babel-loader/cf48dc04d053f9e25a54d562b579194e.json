{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, withModifiers as _withModifiers, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container-fluid well span6\"\n};\nconst _hoisted_2 = {\n  class: \"row-fluid\"\n};\nconst _hoisted_3 = {\n  class: \"span2\"\n};\nconst _hoisted_4 = [\"src\"];\nconst _hoisted_5 = {\n  class: \"span8\"\n};\nconst _hoisted_6 = {\n  title: \"name\"\n};\nconst _hoisted_7 = {\n  key: 0,\n  class: \"text-right fw-bold fs-3 btn btn-warning btn-sm\"\n};\nexport function render(_ctx, _cache) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"img\", {\n    src: _ctx.avatar,\n    class: \"img-circle\",\n    alt: \"avatar\"\n  }, null, 8\n  /* PROPS */\n  , _hoisted_4)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"h3\", _hoisted_6, _toDisplayString(_ctx.firstname) + \" \" + _toDisplayString(_ctx.lastname), 1\n  /* TEXT */\n  ), _createElementVNode(\"h6\", null, \"Membre depuis le \" + _toDisplayString(new Date(_ctx.createdAt).toLocaleString(\"fr-FR\", {\n    timeZone: \"UTC\"\n  })), 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", null, _toDisplayString(_ctx.publications.length) + \" publications \", 1\n  /* TEXT */\n  ), _createElementVNode(\"p\", null, _toDisplayString(_ctx.comments.length) + \" commentaires \", 1\n  /* TEXT */\n  )])])]), _createElementVNode(\"div\", null, [_createVNode(_component_router_link, {\n    to: {\n      name: 'ModifyUser',\n      params: {\n        id: _ctx.id\n      }\n    }\n  }, {\n    default: _withCtx(() => [this.id == _ctx.userid || _ctx.admin == `true` ? (_openBlock(), _createElementBlock(\"button\", _hoisted_7, \" Modifier profile \")) : _createCommentVNode(\"v-if\", true)]),\n    _: 1\n    /* STABLE */\n\n  }, 8\n  /* PROPS */\n  , [\"to\"]), this.id == _ctx.userid || _ctx.admin == `true` ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"text-right fw-bold fs-3 btn btn-danger btn-sm\",\n    onClick: _cache[0] || (_cache[0] = _withModifiers((...args) => _ctx.deleteUser && _ctx.deleteUser(...args), [\"prevent\"]))\n  }, \"Supprimer profile\")) : _createCommentVNode(\"v-if\", true)])], 64\n  /* STABLE_FRAGMENT */\n  );\n}","map":{"version":3,"mappings":";;EAEOA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;EACJA,KAAK,EAAC;;;;EAINA,KAAK,EAAC;;;EACLC,KAAK,EAAC;;;;EAqBwCD,KAAK,EAAC;;;;;6DA5B9DE,oBAuBM,KAvBN,cAuBM,CAtBJA,oBAqBM,KArBN,cAqBM,CApBJA,oBAEM,KAFN,cAEM,CADJA,oBAAmD,KAAnD,EAAmD;IAA7CC,GAAG,EAAEC,WAAwC;IAAhCJ,KAAK,EAAC,YAA0B;IAAbK,GAAG,EAAC;EAAS,CAAnD;;EAAA,aACI,CAFN,CAoBI,EAhBJH,oBAaM,KAbN,cAaM,CAZJA,oBAAqD,IAArD,cAAqDI,iBAAjCF,cAAiC,IAArB,GAAqB,GAApBE,iBAAGF,aAAH,CAAjC,EAA4C;EAAA;EAA5C,CAYI,EAXJF,oBAIO,IAJP,EAIO,IAJP,EAAI,sBAAiBI,qBAAoBC,IAApB,CAAyBH,cAAzB,EAAoCI,cAApC,CAAkD,OAAlD,EAAkD;;EAAA,CAAlD,EAArB;;EAAA,CAWI,EANJN,oBAEI,GAFJ,EAEI,IAFJ,EAEII,iBADCF,kBAAaK,MACd,IADuB,gBAD3B,EAEA;EAAA;EAFA,CAMI,EAHJP,oBAEI,GAFJ,EAEI,IAFJ,EAEII,iBADCF,cAASK,MACV,IADmB,gBADvB,EAEA;EAAA;EAFA,CAGI,CAbN,CAgBI,CArBN,CAsBI,CAvBN,GAwBAP,oBAWM,KAXN,EAWM,IAXN,EAWM,CARJQ,aAIcC,sBAJd,EAIc;IAJAC,EAAE;MAAAC;MAAAC;QAAAC,IAAkCX;MAAlC;IAAA;EAIF,CAJd;sBACE,MAES,MAFUW,MAAMX,eAAUA,cAAK,wBAAxCY,oBAES,QAFT,cAA4G,oBAA5G,sCAES;;;;GAHX;;EAAA,SAQI,OAFeD,MAAMX,eAAUA,cAAK,wBAAxCY,oBACwD,QADxD,EACwD;UAAA;IADJhB,KAAK,EAAC,+CACF;IAArDiB,OAAK,wDAAUb,2CAAV,EAAoB,WAApB;EAAgD,CADxD,EAC8B,mBAD9B,sCAEI,CAXN","names":["class","title","_createElementVNode","src","_ctx","alt","_toDisplayString","Date","toLocaleString","length","_createVNode","_component_router_link","to","name","params","id","_createElementBlock","onClick"],"sourceRoot":"","sources":["D:\\Code\\Projet 7\\p7-groupomania\\P7-Groupomania\\frontend\\src\\components\\UserSingleTemplate.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"container-fluid well span6\">\r\n    <div class=\"row-fluid\">\r\n      <div class=\"span2\">\r\n        <img :src=\"avatar\" class=\"img-circle\" alt=\"avatar\">\r\n      </div>\r\n\r\n      <div class=\"span8\">\r\n        <h3 title=\"name\">{{ firstname }} {{ lastname }} </h3>\r\n        <h6>Membre depuis le {{ new\r\n            Date(createdAt).toLocaleString(\"fr-FR\", {\r\n              timeZone: \"UTC\"\r\n            })\r\n        }}</h6>\r\n        <p>\r\n          {{ publications.length }} publications\r\n        </p>\r\n        <p>\r\n          {{ comments.length }} commentaires\r\n        </p>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  </div>\r\n  <div>\r\n\r\n\r\n    <router-link :to=\"{ name: 'ModifyUser', params: { id } }\">\r\n      <button v-if=\"this.id == userid || admin == `true`\" class=\"text-right fw-bold fs-3 btn btn-warning btn-sm \">\r\n        Modifier profile\r\n      </button>\r\n    </router-link>\r\n\r\n    <button v-if=\"this.id == userid || admin == `true`\" class=\"text-right fw-bold fs-3 btn btn-danger btn-sm\"\r\n      @click.prevent=\"deleteUser\">Supprimer profile</button>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n\r\nconst isAdmin = sessionStorage.getItem(\"isAdmin\")\r\nconsole.log(isAdmin)\r\n\r\n\r\nconsole.log(\"true\")\r\n} else {\r\n  console.log(\"false\")\r\n}\r\n\r\n\r\nexport default {\r\n\r\n\r\n\r\n  name: \"SingleUser\",\r\n  data() {\r\n    return {\r\n      userid: sessionStorage.getItem(\"userId\"),\r\n      admin: sessionStorage.getItem(\"isAdmin\")\r\n    }\r\n  },\r\n  props: ['firstname', 'lastname', 'email', 'id', 'createdAt', 'comments', 'publications', 'avatar'],\r\n  methods: {\r\n    deleteUser() {\r\n      const userId = this.$route.params.id;\r\n      fetch('http://localhost:3000/api/users/' + userId, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': \"Bearer \" + sessionStorage.getItem(\"Token\")\r\n        },\r\n\r\n      })\r\n        .then(() => {\r\n          if (isAdmin == \"true\") {\r\n            document.location.href = `http://localhost:8080/users`\r\n          } else {\r\n            sessionStorage.clear()\r\n            document.location.href = `http://localhost:8080`\r\n\r\n          }\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}