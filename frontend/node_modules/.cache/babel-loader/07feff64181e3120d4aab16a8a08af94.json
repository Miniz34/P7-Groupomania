{"ast":null,"code":"const isAdmin = sessionStorage.getItem(\"isAdmin\");\nconsole.log(isAdmin);\nexport default {\n  name: \"SingleUser\",\n\n  data() {\n    return {\n      userid: sessionStorage.getItem(\"userId\"),\n      admin: sessionStorage.getItem(\"isAdmin\")\n    };\n  },\n\n  props: ['firstname', 'lastname', 'email', 'id', 'createdAt', 'comments', 'publications', 'avatar'],\n  methods: {\n    deleteUser() {\n      const userId = this.$route.params.id;\n      fetch('http://localhost:3000/api/users/' + userId, {\n        method: \"DELETE\",\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'Authorization': \"Bearer \" + sessionStorage.getItem(\"Token\")\n        }\n      }).then(() => {// if (\"admin\" == \"true\") {\n        //   document.location.href = `http://localhost:8080/users`\n        // } else {\n        //   sessionStorage.clear()\n        //   document.location.href = `http://localhost:8080`\n        // }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"AA8CA,MAAMA,OAAM,GAAIC,cAAc,CAACC,OAAf,CAAuB,SAAvB,CAAhB;AACAC,OAAO,CAACC,GAAR,CAAYJ,OAAZ;AAGA,eAAe;EAIbK,IAAI,EAAE,YAJO;;EAKbC,IAAI,GAAG;IACL,OAAO;MACLC,MAAM,EAAEN,cAAc,CAACC,OAAf,CAAuB,QAAvB,CADH;MAELM,KAAK,EAAEP,cAAc,CAACC,OAAf,CAAuB,SAAvB;IAFF,CAAP;EAID,CAVY;;EAWbO,KAAK,EAAE,CAAC,WAAD,EAAc,UAAd,EAA0B,OAA1B,EAAmC,IAAnC,EAAyC,WAAzC,EAAsD,UAAtD,EAAkE,cAAlE,EAAkF,QAAlF,CAXM;EAYbC,OAAO,EAAE;IACPC,UAAU,GAAG;MACX,MAAMC,MAAK,GAAI,KAAKC,MAAL,CAAYC,MAAZ,CAAmBC,EAAlC;MACAC,KAAK,CAAC,qCAAqCJ,MAAtC,EAA8C;QACjDK,MAAM,EAAE,QADyC;QAEjDC,OAAO,EAAE;UACP,UAAU,kBADH;UAEP,gBAAgB,kBAFT;UAGP,iBAAiB,YAAYjB,cAAc,CAACC,OAAf,CAAuB,OAAvB;QAHtB;MAFwC,CAA9C,CAAL,CASGiB,IATH,CASQ,MAAM,CACV;QACA;QACA;QACA;QACA;QAEA;MACD,CAjBH;IAkBF;;EArBO;AAZI,CAAf","names":["isAdmin","sessionStorage","getItem","console","log","name","data","userid","admin","props","methods","deleteUser","userId","$route","params","id","fetch","method","headers","then"],"sourceRoot":"","sources":["D:\\Code\\Projet 7\\p7-groupomania\\P7-Groupomania\\frontend\\src\\components\\UserSingleTemplate.vue"],"sourcesContent":["<template>\r\n\r\n  <div class=\"container-fluid well span6\">\r\n    <div class=\"row-fluid\">\r\n      <div class=\"span2\">\r\n        <img :src=\"avatar\" class=\"img-circle\" alt=\"avatar\">\r\n      </div>\r\n\r\n      <div class=\"span8\">\r\n        <h3 title=\"name\">{{ firstname }} {{ lastname }} </h3>\r\n        <h6>Membre depuis le {{ new\r\n            Date(createdAt).toLocaleString(\"fr-FR\", {\r\n              timeZone: \"UTC\"\r\n            })\r\n        }}</h6>\r\n        <p>\r\n          {{ publications.length }} publications\r\n        </p>\r\n        <p>\r\n          {{ comments.length }} commentaires\r\n        </p>\r\n      </div>\r\n\r\n\r\n    </div>\r\n  </div>\r\n  <div>\r\n\r\n\r\n    <router-link :to=\"{ name: 'ModifyUser', params: { id } }\">\r\n      <button v-if=\"this.id == userid || admin == `true`\" class=\"text-right fw-bold fs-3 btn btn-warning btn-sm \">\r\n        Modifier profile\r\n      </button>\r\n    </router-link>\r\n\r\n    <button v-if=\"this.id == userid || admin == `true`\" class=\"text-right fw-bold fs-3 btn btn-danger btn-sm\"\r\n      @click.prevent=\"deleteUser\">Supprimer profile</button>\r\n  </div>\r\n\r\n\r\n</template>\r\n\r\n\r\n<script>\r\n\r\n\r\nconst isAdmin = sessionStorage.getItem(\"isAdmin\")\r\nconsole.log(isAdmin)\r\n\r\n\r\nexport default {\r\n\r\n\r\n\r\n  name: \"SingleUser\",\r\n  data() {\r\n    return {\r\n      userid: sessionStorage.getItem(\"userId\"),\r\n      admin: sessionStorage.getItem(\"isAdmin\")\r\n    }\r\n  },\r\n  props: ['firstname', 'lastname', 'email', 'id', 'createdAt', 'comments', 'publications', 'avatar'],\r\n  methods: {\r\n    deleteUser() {\r\n      const userId = this.$route.params.id;\r\n      fetch('http://localhost:3000/api/users/' + userId, {\r\n        method: \"DELETE\",\r\n        headers: {\r\n          'Accept': 'application/json',\r\n          'Content-Type': 'application/json',\r\n          'Authorization': \"Bearer \" + sessionStorage.getItem(\"Token\")\r\n        },\r\n\r\n      })\r\n        .then(() => {\r\n          // if (\"admin\" == \"true\") {\r\n          //   document.location.href = `http://localhost:8080/users`\r\n          // } else {\r\n          //   sessionStorage.clear()\r\n          //   document.location.href = `http://localhost:8080`\r\n\r\n          // }\r\n        })\r\n    }\r\n\r\n  }\r\n\r\n\r\n}\r\n\r\n</script>\r\n\r\n\r\n<style scoped>\r\n</style>"]},"metadata":{},"sourceType":"module"}